# A0105748B
###### \java\seedu\bulletjournal\logic\commands\AddCommand.java
``` java
    /**
     * Creates an AddCommand using raw values.
     *
     * @throws IllegalValueException
     *             if any of the raw values are invalid
     */
    public AddCommand(String taskname, String duedate, String status, String begindate, Set<String> tags)
            throws IllegalValueException {
        final Set<Tag> tagSet = new HashSet<>();
        for (String tagName : tags) {
            tagSet.add(new Tag(tagName));
        }
        this.toAdd = new Task(new TaskName(taskname), duedate == null ?
                null : new DueDate(duedate), status == null ?
                null : new Status(status), begindate == null ?
                null : new BeginDate(begindate), new UniqueTagList(tagSet));
    }
```
###### \java\seedu\bulletjournal\logic\commands\ShowCommand.java
``` java
package seedu.bulletjournal.logic.commands;

import java.util.Set;

/**
 * Finds and lists all tasks that are done or undone.
 * Keyword matching is case insensitive.
 */
public class ShowCommand extends Command {

    public static final String COMMAND_WORD = "show";

    public static final String MESSAGE_USAGE = COMMAND_WORD + ": Finds all tasks that are "
            + "done or undone (case-insensitive) and displays them as a list with index numbers.\n"
            + "Parameters: KEYWORD\n"
            + "Example: " + COMMAND_WORD + " done";

    private final Set<String> keywords;
    
    public ShowCommand(Set<String> keywords) {
        this.keywords = keywords;
        if (this.keywords.contains("undone")) {
            keywords.add("empty");
        }
    }

    @Override
    public CommandResult execute() {
        model.updateMatchedTaskList(keywords);
        return new CommandResult(getMessageForTaskListShownSummary(model.getFilteredTaskList().size()));
    }

}
```
###### \java\seedu\bulletjournal\logic\LogicManager.java
``` java
    @Override
    public ObservableList<ReadOnlyTask> getUndoneTaskList() {
        return model.getUndoneTaskList();
    }
}
```
###### \java\seedu\bulletjournal\logic\parser\AddCommandParser.java
``` java
    /**
     * Parses the given {@code String} of arguments in the context of the AddCommand
     * and returns an AddCommand object for execution.
     */
    public Command parse(String args) {
        ArgumentTokenizer argsTokenizer =
                new ArgumentTokenizer(PREFIX_DEADLINE, PREFIX_STATUS, PREFIX_BEGINTIME, PREFIX_TAG);
        argsTokenizer.tokenize(args);
        try {
            return new AddCommand(
                    argsTokenizer.getPreamble().get(),
                    argsTokenizer.getValue(PREFIX_DEADLINE).isPresent() ?
                            argsTokenizer.getValue(PREFIX_DEADLINE).get() : null,
                    argsTokenizer.getValue(PREFIX_STATUS).isPresent() ?
                            argsTokenizer.getValue(PREFIX_STATUS).get() : null,
                    argsTokenizer.getValue(PREFIX_BEGINTIME).isPresent() ?
                            argsTokenizer.getValue(PREFIX_BEGINTIME).get() : null,
                    ParserUtil.toSet(argsTokenizer.getAllValues(PREFIX_TAG))
            );
        } catch (NoSuchElementException nsee) {
            return new IncorrectCommand(String.format(MESSAGE_INVALID_COMMAND_FORMAT, AddCommand.MESSAGE_USAGE));
        } catch (IllegalValueException ive) {
            return new IncorrectCommand(ive.getMessage());
        }
    }

}
```
###### \java\seedu\bulletjournal\logic\parser\CliSyntax.java
``` java
    /* Prefix definitions */
    public static final Prefix PREFIX_DEADLINE = new Prefix("d/");
    public static final Prefix PREFIX_STATUS = new Prefix("s/");
    public static final Prefix PREFIX_BEGINTIME = new Prefix("b/");
    public static final Prefix PREFIX_TAG = new Prefix("t/");

    /* Patterns definitions */
    public static final Pattern KEYWORDS_ARGS_FORMAT =
            Pattern.compile("(?<keywords>\\S+(?:\\s+\\S+)*)"); // one or more keywords separated by whitespace

}
```
###### \java\seedu\bulletjournal\logic\parser\ShowCommandParser.java
``` java
package seedu.bulletjournal.logic.parser;

import static seedu.bulletjournal.commons.core.Messages.MESSAGE_INVALID_COMMAND_FORMAT;
import static seedu.bulletjournal.logic.parser.CliSyntax.KEYWORDS_ARGS_FORMAT;

import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;
import java.util.regex.Matcher;

import seedu.bulletjournal.logic.commands.Command;
import seedu.bulletjournal.logic.commands.IncorrectCommand;
import seedu.bulletjournal.logic.commands.ShowCommand;

/**
 * Parses input arguments and creates a new ShowCommand object
 */
public class ShowCommandParser {

    /**
     * Parses the given {@code String} of arguments in the context of the ShowCommand
     * and returns an ShowCommand object for execution.
     */
    public Command parse(String args) {
        final Matcher matcher = KEYWORDS_ARGS_FORMAT.matcher(args.trim());
        if (!matcher.matches()) {
            return new IncorrectCommand(
                    String.format(MESSAGE_INVALID_COMMAND_FORMAT, ShowCommand.MESSAGE_USAGE));
        }

        // keywords delimited by whitespace
        final String[] keywords = matcher.group("keywords").split("\\s+");
        final Set<String> keywordSet = new HashSet<>(Arrays.asList(keywords));
        return new ShowCommand(keywordSet);
    }

}
```
###### \java\seedu\bulletjournal\model\Model.java
``` java
    /** Returns the undone task list as an {@code UnmodifiableObservableList<ReadOnlyTask>} */
    UnmodifiableObservableList<ReadOnlyTask> getUndoneTaskList();

    /** Updates the filter of the filtered task list to show all tasks */
    void updateFilteredListToShowAll();

    /** Updates the filter of the filtered task list to show undone tasks */
    void updateFilteredListToShowUndone();

    /** Updates the filter of the filtered task list to filter by the given keywords*/
    void updateFilteredTaskList(Set<String> keywords);

    /** Updates the filter of the filtered task list to filter by the given keywords*/
    void updateMatchedTaskList(Set<String> keywords);

}
```
###### \java\seedu\bulletjournal\model\ModelManager.java
``` java
    @Override
    public UnmodifiableObservableList<ReadOnlyTask> getUndoneTaskList() {
        String[] keywords = new String[2];
        keywords[0] = "undone";
        keywords[1] = "empty";
        Set<String> keywordSet = new HashSet<>(Arrays.asList(keywords));
        updateMatchedTaskList(keywordSet);
        return new UnmodifiableObservableList<>(filteredTasks);
    }

    @Override
    public void updateFilteredListToShowUndone() {
        String[] keywords = new String[2];
        keywords[0] = "undone";
        keywords[1] = "empty";
        Set<String> keywordSet = new HashSet<>(Arrays.asList(keywords));
        updateMatchedTaskList(keywordSet);
    }
    @Override
    public void updateFilteredListToShowAll() {
        filteredTasks.setPredicate(null);
    }

    @Override
    public void updateFilteredTaskList(Set<String> keywords) {
        updateFilteredTaskList(new PredicateExpression(new NameQualifier(keywords)));
    }

    private void updateFilteredTaskList(Expression expression) {
        filteredTasks.setPredicate(expression::satisfies);
    }

```
###### \java\seedu\bulletjournal\model\ModelManager.java
``` java
    @Override
    public void updateMatchedTaskList(Set<String> keywords) {
        updateMatchedTaskList(new PredicateExpression(new StatusQualifier(keywords)));
    }

    private void updateMatchedTaskList(Expression expression) {
        filteredTasks.setPredicate(expression::satisfies);
    }
```
###### \java\seedu\bulletjournal\model\ModelManager.java
``` java

    private class NameQualifier implements Qualifier {
        private Set<String> nameKeyWords;

        NameQualifier(Set<String> nameKeyWords) {
            this.nameKeyWords = nameKeyWords;
        }

        @Override
        public boolean run(ReadOnlyTask task) {
            return nameKeyWords.stream()
                    .filter(keyword -> StringUtil.containsWordIgnoreCase(task.getTaskName().fullName, keyword))
                    .findAny()
                    .isPresent();
        }

        @Override
        public String toString() {
            return "name=" + String.join(", ", nameKeyWords);
        }
    }

    private class StatusQualifier implements Qualifier {
        private Set<String> statusKeyWords;

        StatusQualifier(Set<String> nameKeyWords) {
            this.statusKeyWords = nameKeyWords;
        }

        @Override
        public boolean run(ReadOnlyTask task) {
            return statusKeyWords.stream()
                    .filter(keyword -> StringUtil.containsWordIgnoreCase(task.getStatus() == null ?
                            "empty" : task.getStatus().value, keyword))
                    .findAny()
                    .isPresent();
        }

        @Override
        public String toString() {
            return "status=" + String.join(", ", statusKeyWords);
        }
    }

}
```
###### \java\seedu\bulletjournal\model\task\ReadOnlyTask.java
``` java
    /**
     * Returns true if both have the same state. (interfaces cannot override .equals)
     */
    default boolean isSameStateAs(ReadOnlyTask other) {
        return other == this // short circuit if same object
                || (other != null // this is first to avoid NPE below
                && other.getTaskName().equals(this.getTaskName()) // state checks here onwards
                && (other.getPhone() == null ?
                        "" : other.getPhone()).equals(this.getPhone() == null ?
                                "" : this.getPhone())
                && (other.getStatus() == null ?
                        "" : other.getStatus()).equals(this.getStatus() == null ?
                                "" : this.getStatus())
                && (other.getAddress() == null ?
                        "" : other.getAddress()).equals(this.getAddress() == null ?
                                "" : this.getAddress()));
    }
```
###### \java\seedu\bulletjournal\model\task\Status.java
``` java
package seedu.bulletjournal.model.task;


import seedu.bulletjournal.commons.exceptions.IllegalValueException;

/**
 * Email morphed into completion status of task
 * Represents a Task's status in the task manager.
 * Guarantees: immutable; is valid as declared in {@link #isValidStatus(String)}
 */
public class Status {

    public static final String MESSAGE_STATUS_CONSTRAINTS =
            "Task status should be done/undone.";
    public static final String STATUS_VALIDATION_REGEX = "(done|undone)";

    public final String value;

    /**
     * Validates given status.
     *
     * @throws IllegalValueException if given status string is invalid.
     */
    public Status(String status) throws IllegalValueException {
        assert status != null;
        String trimmedEmail = status.trim().toLowerCase();
        if (!isValidStatus(trimmedEmail)) {
            throw new IllegalValueException(MESSAGE_STATUS_CONSTRAINTS);
        }
        this.value = trimmedEmail;
    }
```
###### \java\seedu\bulletjournal\storage\XmlAdaptedTask.java
``` java
package seedu.bulletjournal.storage;

import java.util.ArrayList;
import java.util.List;

import javax.xml.bind.annotation.XmlElement;

import seedu.bulletjournal.commons.exceptions.IllegalValueException;
import seedu.bulletjournal.model.tag.Tag;
import seedu.bulletjournal.model.tag.UniqueTagList;
import seedu.bulletjournal.model.task.BeginDate;
import seedu.bulletjournal.model.task.DueDate;
import seedu.bulletjournal.model.task.ReadOnlyTask;
import seedu.bulletjournal.model.task.Status;
import seedu.bulletjournal.model.task.Task;
import seedu.bulletjournal.model.task.TaskName;

/**
 * JAXB-friendly version of the Task.
 */
public class XmlAdaptedTask {

    @XmlElement(required = true)
    private String name;
    @XmlElement(required = false)
    private String phone;
    @XmlElement(required = false)
    private String email;
    @XmlElement(required = false)
    private String address;

    @XmlElement
    private List<XmlAdaptedTag> tagged = new ArrayList<>();

    /**
     * Constructs an XmlAdaptedTask.
     * This is the no-arg constructor that is required by JAXB.
     */
    public XmlAdaptedTask() {}


    /**
     * Converts a given Task into this class for JAXB use.
     *
     * @param source future changes to this will not affect the created XmlAdaptedTask
     */
    public XmlAdaptedTask(ReadOnlyTask source) {
        name = source.getTaskName().fullName;
        phone = source.getPhone() == null ? null : source.getPhone().value;
        email = source.getStatus() == null ? null : source.getStatus().value;
        address = source.getAddress() == null ? null : source.getAddress().value;
        tagged = new ArrayList<>();
        for (Tag tag : source.getTags()) {
            tagged.add(new XmlAdaptedTag(tag));
        }
    }

    /**
     * Converts this jaxb-friendly adapted task object into the model's Task object.
     *
     * @throws IllegalValueException if there were any data constraints violated in the adapted task
     */
    public Task toModelType() throws IllegalValueException {
        final List<Tag> taskTags = new ArrayList<>();
        for (XmlAdaptedTag tag : tagged) {
            taskTags.add(tag.toModelType());
        }
        final TaskName taskName = new TaskName(this.name);
        final DueDate dueDate = this.phone == null ? null : new DueDate(this.phone);
        final Status status = this.email == null ? null : new Status(this.email);
        final BeginDate beginDate = this.address == null ? null : new BeginDate(this.address);
        final UniqueTagList tags = new UniqueTagList(taskTags);
        return new Task(taskName, dueDate, status, beginDate, tags);
    }
}
```
###### \java\seedu\bulletjournal\ui\MainWindow.java
``` java
    /**
     * Decides what to show on main window when the application initializes.
     */
    public void fillInnerPartsAtStart() {
        browserPanel = new BrowserPanel(browserPlaceholder);
        taskListPanel = new TaskListPanel(getTaskListPlaceholder(), logic.getUndoneTaskList());
        new ResultDisplay(getResultDisplayPlaceholder());
        new StatusBarFooter(getStatusbarPlaceholder(), config.getBulletJournalFilePath());
        new CommandBox(getCommandBoxPlaceholder(), logic);
    }
```
###### \java\seedu\bulletjournal\ui\TaskCard.java
``` java

    public TaskCard(ReadOnlyTask task, int displayedIndex) {
        super(FXML);
        name.setText(task.getTaskName().fullName);
        id.setText(displayedIndex + ". ");
        phone.setText(task.getPhone() == null ? "" : task.getPhone().value);
        address.setText(task.getAddress() == null ? "" : task.getAddress().value);
        email.setText(task.getStatus() == null ? "" : task.getStatus().value);
        initTags(task);
    }

    private void initTags(ReadOnlyTask task) {
        task.getTags().forEach(tag -> tags.getChildren().add(new Label(tag.tagName)));
    }
}
```
###### \resources\view\TaskListCard.fxml
``` fxml
                        <Label fx:id="email" styleClass="cell_small_label" text="\$email" />
                        <Label fx:id="address" styleClass="cell_small_label" text="\$address" />
                        <Label fx:id="phone" styleClass="cell_small_label" text="\$phone" />
                    </children>
                </VBox>
            </children>
         <rowConstraints>
            <RowConstraints />
         </rowConstraints>
        </GridPane>
    </children>
</HBox>
```
